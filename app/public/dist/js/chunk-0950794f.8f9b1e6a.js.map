{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.string.iterator.js","webpack:///./src/components/MoveBlock/index.vue?990d","webpack:///./src/layout/sysManger/userManger/index.vue?f971","webpack:///./src/layout/sysManger/userManger/index.vue?5f17","webpack:///./src/api/user.js","webpack:///./src/components/MoveBlock/index.vue?5257","webpack:///src/components/MoveBlock/index.vue","webpack:///./src/components/MoveBlock/index.vue?e83f","webpack:///./src/components/MoveBlock/index.vue","webpack:///src/layout/sysManger/userManger/index.vue","webpack:///./src/layout/sysManger/userManger/index.vue?706a","webpack:///./src/layout/sysManger/userManger/index.vue"],"names":["$at","__webpack_require__","String","iterated","this","_t","_i","point","O","index","length","value","undefined","done","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_0ff375c4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_0ff375c4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_0b8daac8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_0b8daac8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","span","slot","_v","staticStyle","float","padding","type","on","click","$event","addUserDialogBtn","_l","val","key","userid","position","movedata","to","path","query","_s","userName","icon","size","deleteI","title","identityName","addAuthor","i","id","class","active","hoverActive","hoverIndex","changeIdentity","dragenter","drop","stopPropagation","authorityName","name","userAFromI","aFromI","currentIdentityName","authority","allAuthority","find","item","deleteAuthor","visible","width","before-close","handleClose","update:visible","ref","inline","label-width","rules","addUserRule","model","addUserData","label-position","label","prop","callback","$$v","$set","expression","placeholder","submitAddUser","newAuthorViseble","center","margin-bottom","newAuthor","loading","newLoading","addNewAuthorFn","staticRenderFns","getAllUser","axios","get","HOST","getAllIdentity","getAllAuthority","addNewUser","data","post","changeUserAuthor","addUserAuthor","getUserAuthorityFromIdentity","identityId","Promise","all","getUserFromIdentity","getAuthorityFromIdentity","params","addNewAuthor","obj","deleteUser","MoveBlockvue_type_template_id_0ff375c4_scoped_true_render","draggable","dragstart","MoveBlockvue_type_template_id_0ff375c4_scoped_true_staticRenderFns","MoveBlockvue_type_script_lang_js_","props","Object","methods","_ref","dataTransfer","setData","JSON","stringify","components_MoveBlockvue_type_script_lang_js_","component","componentNormalizer","MoveBlock","userMangervue_type_script_lang_js_","usernameValidate","rule","reg","test","Error","passwordValidate","userPwd","identity","required","validator","trigger","message","allUser","allIdentity","components","scrollPane","ScrollPane","moveBlock","mounted","_this","getAllUsers","getAllI","then","keys","map","_objectSpread","document","addEventListener","dragover","destroyed","removeEventListener","_deleteI","asyncToGenerator","regeneratorRuntime","mark","_callee","isUser","_this2","wrap","_context","prev","next","utils","tableName","res","t0","stop","_x","_x2","apply","arguments","isFirst","_this3","_ref2","showInfo","_this4","catch","err","_deleteAuthor2","_callee2","_this5","_context2","identity_id","user_deleteAuthor","_x3","_this6","_ref3","e","preventDefault","_this7","console","log","_ref4","_this8","parse","getData","_obj","editData","formName","_this9","$refs","validate","valid","code","sysManger_userMangervue_type_script_lang_js_","userManger_component","__webpack_exports__"],"mappings":"kHACA,IAAAA,EAAUC,EAAQ,OAARA,EAAsB,GAGhCA,EAAQ,OAARA,CAAwBC,OAAA,kBAAAC,GACxBC,KAAAC,GAAAH,OAAAC,GACAC,KAAAE,GAAA,GAEC,WACD,IAEAC,EAFAC,EAAAJ,KAAAC,GACAI,EAAAL,KAAAE,GAEA,OAAAG,GAAAD,EAAAE,OAAA,CAAiCC,WAAAC,EAAAC,MAAA,IACjCN,EAAAP,EAAAQ,EAAAC,GACAL,KAAAE,IAAAC,EAAAG,OACA,CAAUC,MAAAJ,EAAAM,MAAA,kECfV,IAAAC,EAAAb,EAAA,QAAAc,EAAAd,EAAAe,EAAAF,GAAmfC,EAAG,qCCAtf,IAAAE,EAAAhB,EAAA,QAAAiB,EAAAjB,EAAAe,EAAAC,GAAqgBC,EAAG,4CCAxgB,IAAAC,EAAA,WAA0B,IAAAC,EAAAhB,KAAaiB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iBAA4B,CAAAF,EAAA,UAAeG,MAAA,CAAOC,OAAA,KAAa,CAAAJ,EAAA,UAAeG,MAAA,CAAOE,KAAA,KAAW,CAAAL,EAAA,WAAAA,EAAA,OAA0BE,YAAA,WAAAC,MAAA,CAA8BG,KAAA,UAAgBA,KAAA,UAAe,CAAAN,EAAA,QAAAH,EAAAU,GAAA,QAAAP,EAAA,aAA4CQ,YAAA,CAAaC,MAAA,QAAAC,QAAA,SAAkCP,MAAA,CAAQQ,KAAA,QAAcC,GAAA,CAAKC,MAAA,SAAAC,GAAyBjB,EAAAkB,kBAAA,KAA8B,CAAAf,EAAA,KAAUE,YAAA,gCAA0CL,EAAAU,GAAA,cAAAP,EAAA,eAAAA,EAAA,UAAsDG,MAAA,CAAOC,OAAA,KAAaP,EAAAmB,GAAAnB,EAAA,iBAAAoB,GAAoC,OAAAjB,EAAA,UAAoBkB,IAAAD,EAAAE,OAAAX,YAAA,CAA4BY,SAAA,YAAsBjB,MAAA,CAAQE,KAAA,KAAW,CAAAL,EAAA,cAAmBG,MAAA,CAAOkB,SAAAJ,IAAgB,CAAAjB,EAAA,MAAAA,EAAA,QAAAA,EAAA,eAAwCG,MAAA,CAAOmB,GAAA,CAAMC,KAAA,wBAAAC,MAAA,CAAqCL,OAAAF,EAAAE,WAAsB,CAAAtB,EAAAU,GAAA,qDAAAV,EAAA4B,GAAAR,EAAAS,UAAA,oDAAA1B,EAAA,aAAuJE,YAAA,aAAAM,YAAA,CAAsCE,QAAA,OAAgBP,MAAA,CAAQQ,KAAA,OAAAgB,KAAA,iBAAAC,KAAA,QAAoDhB,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAjB,EAAAgC,QAAAZ,GAAA,QAAgC,GAAAjB,EAAA,MAAeG,MAAA,CAAO2B,MAAAb,EAAAc,eAA0B,CAAA/B,EAAA,QAAAH,EAAAU,GAAA,SAAAV,EAAA4B,GAAAR,EAAAc,sBAAA,KAAiE,eAAA/B,EAAA,UAA8BG,MAAA,CAAOE,KAAA,KAAW,CAAAL,EAAA,WAAAA,EAAA,OAA0BE,YAAA,WAAAC,MAAA,CAA8BG,KAAA,UAAgBA,KAAA,UAAe,CAAAN,EAAA,QAAAH,EAAAU,GAAA,QAAAP,EAAA,aAA4CQ,YAAA,CAAaC,MAAA,QAAAC,QAAA,SAAkCP,MAAA,CAAQQ,KAAA,QAAcC,GAAA,CAAKC,MAAAhB,EAAAmC,YAAuB,CAAAhC,EAAA,KAAUE,YAAA,gCAA0CL,EAAAU,GAAA,8DAAAP,EAAA,eAAAA,EAAA,MAAkGE,YAAA,iBAA4B,CAAAF,EAAA,MAAAA,EAAA,QAAAH,EAAAU,GAAA,UAAAP,EAAA,QAAAH,EAAAU,GAAA,UAAAP,EAAA,QAAAH,EAAAU,GAAA,UAAAV,EAAAmB,GAAAnB,EAAA,qBAAAoB,EAAAgB,GAAwI,OAAAjC,EAAA,MAAgBkB,IAAAD,EAAAiB,GAAAC,MAAA,CACz3DC,OAAAnB,EAAAiB,KAAArC,EAAAqC,GACAG,YAAAJ,IAAApC,EAAAyC,YAC6B1B,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAjB,EAAA0C,eAAAtB,EAAAiB,GAAAjB,EAAAc,eAAoDS,UAAA,SAAA1B,GAA8B,OAAAjB,EAAA2C,UAAAP,IAAwBQ,KAAA,SAAA3B,GAAyB,OAAAjB,EAAA4C,KAAA3B,EAAAG,MAA8B,CAAAjB,EAAA,QAAAH,EAAAU,GAAAV,EAAA4B,GAAAR,EAAAiB,OAAAlC,EAAA,QAAAH,EAAAU,GAAAV,EAAA4B,GAAAR,EAAAc,iBAAA/B,EAAA,QAAAA,EAAA,aAA+GQ,YAAA,CAAaE,QAAA,OAAgBP,MAAA,CAAQQ,KAAA,SAAAgB,KAAA,iBAAAC,KAAA,QAAsDhB,GAAA,CAAKC,MAAA,SAAAC,GAAkD,OAAzBA,EAAA4B,kBAAyB7C,EAAAgC,QAAAZ,QAA0B,QAAQ,aAAAjB,EAAA,UAA6BG,MAAA,CAAOE,KAAA,KAAW,CAAAL,EAAA,WAAAA,EAAA,OAA0BE,YAAA,WAAAC,MAAA,CAA8BG,KAAA,UAAgBA,KAAA,UAAe,CAAAN,EAAA,QAAAH,EAAAU,GAAA,UAAAP,EAAA,eAAAA,EAAA,UAA6DG,MAAA,CAAOC,OAAA,KAAaP,EAAAmB,GAAAnB,EAAA,sBAAAoB,GAAyC,OAAAjB,EAAA,UAAoBkB,IAAAD,EAAAiB,GAAA/B,MAAA,CAAkBE,KAAA,KAAW,CAAAL,EAAA,cAAmBG,MAAA,CAAOkB,SAAAJ,IAAgB,CAAAjB,EAAA,MAAAA,EAAA,QAAAH,EAAAU,GAAA,UAAAV,EAAA4B,GAAAR,EAAA0B,oBAAA3C,EAAA,MAA+EG,MAAA,CAAO2B,MAAAb,EAAA2B,OAAkB,CAAA5C,EAAA,QAAAH,EAAAU,GAAA,QAAAV,EAAA4B,GAAAR,EAAA2B,cAAA,KAAwD,eAAA5C,EAAA,UAA8BG,MAAA,CAAOE,KAAA,KAAW,CAAAL,EAAA,WAAAA,EAAA,OAA0BE,YAAA,WAAAC,MAAA,CAA8BG,KAAA,UAAgBA,KAAA,UAAe,CAAAN,EAAA,QAAAH,EAAAU,GAAA,cAAAP,EAAA,eAAAH,EAAAgD,WAAA1D,QAAAU,EAAAiD,OAAA3D,OAAAa,EAAA,OAA2GE,YAAA,aAAwB,CAAAF,EAAA,MAAAA,EAAA,MAAAA,EAAA,KAAAH,EAAAU,GAAA,YAAAP,EAAA,MAAAH,EAAAU,GAAA,iCAAAV,EAAA4B,GAAA5B,EAAAkD,qBAAA,kCAAA/C,EAAA,MAAAA,EAAA,MAAAA,EAAA,KAAAH,EAAAU,GAAA,UAAAP,EAAA,MAAAA,EAAA,KAAAH,EAAAmB,GAAAnB,EAAA,gBAAAoB,EAAAgB,GAAkQ,OAAAjC,EAAA,MAAgBkB,IAAAe,GAAM,CAAApC,EAAAU,GAAA,yCAAAV,EAAA4B,GAAAR,EAAA+B,WAAA,IAAAnD,EAAA4B,GAAA5B,EAAAoD,aAAAC,KAAA,SAAAC,GAAyH,OAAAA,EAAAR,gBAAA1B,EAAA+B,YAA6CJ,MAAA,4CAAA5C,EAAA,aAAoEQ,YAAA,CAAaE,QAAA,OAAgBP,MAAA,CAAQQ,KAAA,SAAAgB,KAAA,iBAAAC,KAAA,QAAsDhB,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAjB,EAAAuD,aAAAnC,QAA+B,KAAM,OAAAjB,EAAA,MAAAA,EAAA,MAAAA,EAAA,KAAAH,EAAAU,GAAA,UAAAP,EAAA,MAAAH,EAAAgD,WAAA,OAAA7C,EAAA,KAAAH,EAAAmB,GAAAnB,EAAA,oBAAAoB,GAAmI,OAAAjB,EAAA,MAAgBkB,IAAAD,EAAAiB,IAAW,CAAArC,EAAAU,GAAA,yCAAAV,EAAA4B,GAAAR,EAAAS,UAAA,0CAA+G,GAAA1B,EAAA,OAAAH,EAAAU,GAAA,gBAAAP,EAAA,OAAAH,EAAAU,GAAA,yBAAAP,EAAA,aAAgGG,MAAA,CAAO2B,MAAA,OAAAuB,QAAAxD,EAAAkB,iBAAAuC,MAAA,MAAAC,eAAA1D,EAAA2D,aAA2F5C,GAAA,CAAK6C,iBAAA,SAAA3C,GAAkCjB,EAAAkB,iBAAAD,KAA8B,CAAAd,EAAA,WAAgB0D,IAAA,cAAAvD,MAAA,CAAyBwD,OAAA,GAAAC,cAAA,OAAAC,MAAAhE,EAAAiE,YAAAC,MAAAlE,EAAAmE,YAAAC,iBAAA,SAA0G,CAAAjE,EAAA,gBAAqBG,MAAA,CAAO+D,MAAA,MAAAC,KAAA,aAAiC,CAAAnE,EAAA,YAAiBG,MAAA,CAAOQ,KAAA,QAAcoD,MAAA,CAAQ3E,MAAAS,EAAAmE,YAAA,SAAAI,SAAA,SAAAC,GAA0DxE,EAAAyE,KAAAzE,EAAAmE,YAAA,WAAAK,IAA2CE,WAAA,2BAAoC,GAAAvE,EAAA,gBAAyBG,MAAA,CAAO+D,MAAA,OAAAC,KAAA,YAAiC,CAAAnE,EAAA,YAAiBG,MAAA,CAAOQ,KAAA,YAAkBoD,MAAA,CAAQ3E,MAAAS,EAAAmE,YAAA,QAAAI,SAAA,SAAAC,GAAyDxE,EAAAyE,KAAAzE,EAAAmE,YAAA,UAAAK,IAA0CE,WAAA,0BAAmC,GAAAvE,EAAA,gBAAyBG,MAAA,CAAO+D,MAAA,OAAAC,KAAA,aAAkC,CAAAnE,EAAA,aAAkBG,MAAA,CAAOqE,YAAA,WAAwBT,MAAA,CAAQ3E,MAAAS,EAAAmE,YAAA,SAAAI,SAAA,SAAAC,GAA0DxE,EAAAyE,KAAAzE,EAAAmE,YAAA,WAAAK,IAA2CE,WAAA,yBAAoC1E,EAAAmB,GAAAnB,EAAA,qBAAAoB,GAAwC,OAAAjB,EAAA,aAAuBkB,IAAAD,EAAAiB,GAAA/B,MAAA,CAAkB+D,MAAAjD,EAAAc,aAAA3C,MAAA6B,EAAAiB,QAA2C,OAAAlC,EAAA,gBAA4BE,YAAA,mBAA8B,CAAAF,EAAA,aAAkBG,MAAA,CAAOQ,KAAA,WAAiBC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAjB,EAAA4E,cAAA,kBAA0C,CAAA5E,EAAAU,GAAA,uBAAAP,EAAA,aAAgDG,MAAA,CAAO2B,MAAA,QAAAuB,QAAAxD,EAAA6E,iBAAApB,MAAA,MAAAqB,OAAA,IAAyE/D,GAAA,CAAK6C,iBAAA,SAAA3C,GAAkCjB,EAAA6E,iBAAA5D,KAA8B,CAAAd,EAAA,YAAiBQ,YAAA,CAAaoE,gBAAA,QAAuBzE,MAAA,CAAQqE,YAAA,YAAyBT,MAAA,CAAQ3E,MAAAS,EAAA,UAAAuE,SAAA,SAAAC,GAA+CxE,EAAAgF,UAAAR,GAAkBE,WAAA,eAAyBvE,EAAA,aAAkBY,GAAA,CAAIC,MAAA,SAAAC,GAAyBjB,EAAA6E,kBAAA,KAA+B,CAAA7E,EAAAU,GAAA,SAAAP,EAAA,aAAkCG,MAAA,CAAOQ,KAAA,UAAAmE,QAAAjF,EAAAkF,YAA0CnE,GAAA,CAAKC,MAAAhB,EAAAmF,iBAA4B,CAAAnF,EAAAU,GAAA,kBACnqI0E,EAAA,yGCEO,SAASC,IACd,OAAOC,OAAMC,IAAIC,OAAO,oBAKnB,SAASC,IACd,OAAOH,OAAMC,IAAIC,OAAO,wBAInB,SAASE,IACd,OAAOJ,OAAMC,IAAIC,OAAO,yBAInB,SAASG,EAAWC,GACzB,OAAON,OAAMO,KAAKL,OAAO,mBAAmBI,GAMvC,SAASE,EAAiBF,GAC/B,OAAON,OAAMO,KAAKL,OAAO,iBAAiBI,GAMrC,SAASG,EAAcH,GAC5B,OAAON,OAAMO,KAAML,OAAO,gCAAiCI,GAKtD,SAASrC,EAAaqC,GAC3B,OAAON,OAAMO,KAAKL,OAAO,mCAAoCI,GAIxD,SAASI,EAA6BC,GAC3C,OAAOC,QAAQC,IAAI,CAACC,EAAoBH,GAAaI,EAAyBJ,KAEhF,SAASG,EAAoB/D,GAC3B,OAAOiD,OAAMC,IAAIC,OAAO,4BAA6B,CACnDc,OAAQ,CACNL,WAAY5D,KAKlB,SAASgE,EAAyBhE,GAChC,OAAOiD,OAAMC,IAAIC,OAAO,iCAAkC,CACtDc,OAAQ,CACNL,WAAY5D,KAMb,SAASkE,EAAaC,GACzB,OAAOlB,OAAMO,KAAKL,OAAO,uBAAwBgB,GAK9C,SAASC,EAAWD,GACvB,OAAOlB,OAAMO,KAAKL,OAAO,8BAA+BgB,mBC1ExDE,EAAM,WAAgB,IAAA1G,EAAAhB,KAAaiB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAgBE,YAAA,YAAAC,MAAA,CAA+BqG,UAAA,QAAmB5F,GAAA,CAAK6F,UAAA5G,EAAA4G,YAA2B,CAAA5G,EAAAf,GAAA,gBACvL4H,EAAe,GCKnBC,EAAA,CACAC,MAAA,CACAvF,SAAAwF,QAEAC,QAAA,CACAL,UADA,SAAAM,GACA,IAAAC,EAAAD,EAAAC,aACAA,EAAAC,QAAA,aAAAC,KAAAC,UAAAtI,KAAAwC,cCZ8V+F,EAAA,0BCQ9VC,EAAgBR,OAAAS,EAAA,KAAAT,CACdO,EACAb,EACAG,GACF,EACA,KACA,WACA,MAIea,EAAAF,4kBCsLf,IAAAG,EAAA,CACA/B,KADA,WAEA,IAAAgC,EAAA,SAAAC,EAAAtI,EAAAgF,GACA,IAAAuD,EAAA,YACAvI,EAEAuI,EAAAC,KAAAxI,GAGAgF,IAFAA,EAAA,IAAAyD,MAAA,wBAFAzD,EAAA,IAAAyD,MAAA,aAOAC,EAAA,SAAAJ,EAAAtI,EAAAgF,GACA,IAAAuD,EAAA,WACAvI,EAEAuI,EAAAC,KAAAxI,GAGAgF,IAFAA,EAAA,IAAAyD,MAAA,uBAFAzD,EAAA,IAAAyD,MAAA,YAOA,OACAnD,kBAAA,EACAK,YAAA,EACAF,UAAA,GACA3C,GAAA,EACAI,YAAA,EACAvB,kBAAA,EACAiD,YAAA,CACAtC,SAAA,GACAqG,QAAA,GACAC,SAAA,IAEAlE,YAAA,CACApC,SAAA,CACAuG,UAAA,EACAC,UAAAT,EACAU,QAAA,UAEAJ,QAAA,CACAE,UAAA,EACAC,UAAAJ,EACAK,QAAA,UAEAH,SAAA,CACAC,UAAA,EACAG,QAAA,YAGAC,QAAA,GACAC,YAAA,GACArF,aAAA,GACAJ,WAAA,GACAC,OAAA,KAGAyF,WAAA,CACAC,WAAAC,EAAA,KACAC,UAAAnB,GAEAoB,QA7DA,WA6DA,IAAAC,EAAA/J,KACAA,KAAAgK,cACAhK,KAAAiK,SAAA,GACAvD,IAAAwD,KAAA,SAAAhC,GAAA,IAAAtB,EAAAsB,EAAAtB,KACAmD,EAAA3F,aAAA4D,OAAAmC,KAAAvD,GAAAwD,IAAA,SAAA/H,GACA,OAAAgI,EAAA,CACAvG,cAAAzB,GACAuE,EAAAvE,QAIAiI,SAAAC,iBAAA,WAAAvK,KAAAwK,WAEAC,UA1EA,WA2EAH,SAAAI,oBAAA,WAAA1K,KAAAwK,WAEAvC,QAAA,CACAjF,QADA,eAAA2H,EAAA3C,OAAA4C,EAAA,KAAA5C,CAAA6C,mBAAAC,KAAA,SAAAC,EACAzG,EAAA0G,GADA,IAAAxD,EAAAyD,EAAAjL,KAAA,OAAA6K,mBAAAK,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAGA7D,EAAA,GAHA2D,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAKArD,OAAAsD,EAAA,KAAAtD,GALA,OAMAR,EAAAnE,GAAA2H,EAAA1G,EAAAhC,OAAAgC,EAAAjB,GACAmE,EAAA+D,UAAAP,EAAA,kBACAvD,EAAAD,GAAA0C,KAAA,SAAAsB,GACAR,EAAAC,EAAAjB,cAAAiB,EAAAhB,SAAA,KATAkB,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAM,GAAAN,EAAA,qCAAAA,EAAAO,SAAAX,EAAA,0BAAA/H,EAAA2I,EAAAC,GAAA,OAAAjB,EAAAkB,MAAA7L,KAAA8L,WAAA,OAAA9I,EAAA,GAeAiH,QAfA,SAeA8B,GAAA,IAAAC,EAAAhM,KACAyG,IAAAyD,KAAA,SAAA+B,GAAA,IAAArF,EAAAqF,EAAArF,KACAmF,IACAC,EAAA3I,GAAAuD,EAAA,GAAAvD,GACA2I,EAAA9H,oBAAA0C,EAAA,GAAA1D,cAEA8I,EAAAE,SAAAF,EAAA3I,IACA2I,EAAAvC,YAAA7C,KAGAzD,UAzBA,WA0BAnD,KAAA6F,kBAAA,GAEAM,eA5BA,WA4BA,IAAAgG,EAAAnM,KACAuH,EAAA,CAAArE,aAAAlD,KAAAgG,YAAAkE,KAAA,SAAAsB,GACAW,EAAAtG,kBAAA,EACAsG,EAAAjG,YAAA,EACAiG,EAAAlC,SAAA,KACAmC,MAAA,SAAAC,GACAF,EAAAjG,YAAA,KAGA3B,aArCA,eAAA+H,EAAAtE,OAAA4C,EAAA,KAAA5C,CAAA6C,mBAAAC,KAAA,SAAAyB,EAqCAjI,GArCA,IAAAkD,EAAAgF,EAAAxM,KAAA,OAAA6K,mBAAAK,KAAA,SAAAuB,GAAA,eAAAA,EAAArB,KAAAqB,EAAApB,MAAA,cAAAoB,EAAArB,KAAA,EAAAqB,EAAApB,KAAA,EAuCArD,OAAAsD,EAAA,KAAAtD,GAvCA,OAwCAR,EAAA,CACAkF,YAAApI,EAAAoI,YACAvI,UAAAG,EAAAH,WAEAwI,EAAAnF,GAAA0C,KAAA,SAAAsB,GACAgB,EAAAN,SAAAM,EAAAnJ,MA7CAoJ,EAAApB,KAAA,eAAAoB,EAAArB,KAAA,EAAAqB,EAAAhB,GAAAgB,EAAA,oCAAAA,EAAAf,SAAAa,EAAA,0BAAAhI,EAAAqI,GAAA,OAAAN,EAAAT,MAAA7L,KAAA8L,WAAA,OAAAvH,EAAA,GAoDAyF,YApDA,WAoDA,IAAA6C,EAAA7M,KACAqG,IAAA6D,KAAA,SAAA4C,GAAA,IAAAlG,EAAAkG,EAAAlG,KACAiG,EAAArD,QAAA5C,KAGA4D,SAzDA,SAyDAuC,GACAA,EAAAC,kBAEAd,SA5DA,SA4DA7I,GAAA,IAAA4J,EAAAjN,KACAgH,EAAA3D,GAAA6G,KAAA,SAAAtD,GACAqG,EAAAjJ,WAAA4C,EAAA,GAAAA,KACAqG,EAAAhJ,OAAA2C,EAAA,GAAAA,QAMAlD,eArEA,SAqEAL,EAAAU,GACA/D,KAAAqD,KACArD,KAAAkE,oBAAAH,EACAmJ,QAAAC,IAAAnN,KAAAqD,GAAArD,KAAAkE,qBACAlE,KAAAkM,SAAA7I,IAKAM,UA9EA,SA8EAP,GACApD,KAAAyD,WAAAL,GAKAQ,KApFA,SAAAwJ,EAoFAhL,GAAA,IAAAiL,EAAArN,KAAAmI,EAAAiF,EAAAjF,aAEA3F,EAAA6F,KAAAiF,MAAAnF,EAAAoF,QAAA,eAEA,GAAA/K,EAAAsB,cAAA,CACA,IAAA0D,EAAA,CACAkF,YAAAtK,EAAAiB,GACAc,UAAA3B,EAAAsB,eAEAiD,EAAAS,GAAA0C,KAAA,SAAAsB,GACA6B,EAAA3J,eAAAtB,EAAAiB,GAAAjB,EAAAc,gBACAkJ,MAAA,WACAiB,EAAA3J,eAAAtB,EAAAiB,GAAAjB,EAAAc,oBAEA,CACA,IAAAsK,EAAA,CACAlL,OAAAE,EAAAF,OACAmL,SAAA,CACA5K,SAAAL,EAAAK,SACAqG,QAAA1G,EAAA0G,QACAC,SAAA/G,EAAAiB,KAGAyD,EAAA0G,GAAAtD,KAAA,SAAAsB,GACApJ,EAAAiB,KAAAgK,EAAAhK,IACAgK,EAAA3J,eAAAtB,EAAAiB,GAAAjB,EAAAc,cAEAmK,EAAArD,gBAIAhK,KAAAyD,YAAA,GAEAkB,YArHA,WAsHA3E,KAAAkC,kBAAA,GAKA0D,cA3HA,SA2HA8H,GAAA,IAAAC,EAAA3N,KACAA,KAAA4N,MAAAF,GAAAG,SAAA,SAAAC,GACAA,GACAnH,EAAAgH,EAAAxI,aAAA+E,KAAA,SAAAsB,GAAA,IACAuC,EAAAvC,EAAAuC,KACAA,IAEAJ,EAAAzL,kBAAA,EACAyL,EAAA3D,sBCzZ6WgE,EAAA,ECQzWC,aAAYjG,OAAAS,EAAA,KAAAT,CACdgG,EACAjN,EACAqF,GACF,EACA,KACA,WACA,OAIe8H,EAAA,WAAAD","file":"js/chunk-0950794f.8f9b1e6a.js","sourcesContent":["'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0ff375c4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0ff375c4&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0b8daac8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0b8daac8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userContainer\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"用户\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.addUserDialogBtn = true}}},[_c('i',{staticClass:\"el-icon-circle-plus-outline\"}),_vm._v(\"添加用户\")])],1),_c('scroll-pane',[_c('el-row',{attrs:{\"gutter\":10}},_vm._l((_vm.allUser),function(val){return _c('el-col',{key:val.userid,staticStyle:{\"position\":\"relative\"},attrs:{\"span\":12}},[_c('move-block',{attrs:{\"movedata\":val}},[_c('li',[_c('span',[_c('router-link',{attrs:{\"to\":{path: \"/admin/userDetailInfo\",query:{userid: val.userid}}}},[_vm._v(\"\\n                                            用户名：\"+_vm._s(val.userName)+\"\\n                                        \")])],1),_c('el-button',{staticClass:\"deleteUser\",staticStyle:{\"padding\":\"0px\"},attrs:{\"type\":\"info\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteI(val, true)}}})],1),_c('li',{attrs:{\"title\":val.identityName}},[_c('span',[_vm._v(\"身   份：\"+_vm._s(val.identityName))])])])],1)}),1)],1)],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"身份\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.addAuthor}},[_c('i',{staticClass:\"el-icon-circle-plus-outline\"}),_vm._v(\"\\n                        添加角色\\n                    \")])],1),_c('scroll-pane',[_c('dl',{staticClass:\"identity-list\"},[_c('dt',[_c('span',[_vm._v(\"身份id\")]),_c('span',[_vm._v(\"身份名称\")]),_c('span',[_vm._v(\"操作\")])]),_vm._l((_vm.allIdentity),function(val,i){return _c('dd',{key:val.id,class:{\n                                active:val.id === _vm.id,\n                                hoverActive:i === _vm.hoverIndex\n                            },on:{\"click\":function($event){return _vm.changeIdentity(val.id, val.identityName)},\"dragenter\":function($event){return _vm.dragenter(i)},\"drop\":function($event){return _vm.drop($event,val)}}},[_c('span',[_vm._v(_vm._s(val.id))]),_c('span',[_vm._v(_vm._s(val.identityName))]),_c('span',[_c('el-button',{staticStyle:{\"padding\":\"5px\"},attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteI(val)}}})],1)])})],2)])],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"权限\")])]),_c('scroll-pane',[_c('el-row',{attrs:{\"gutter\":10}},_vm._l((_vm.allAuthority),function(val){return _c('el-col',{key:val.id,attrs:{\"span\":12}},[_c('move-block',{attrs:{\"movedata\":val}},[_c('li',[_c('span',[_vm._v(\"权    限：\"+_vm._s(val.authorityName))])]),_c('li',{attrs:{\"title\":val.name}},[_c('span',[_vm._v(\"权限名称：\"+_vm._s(val.name))])])])],1)}),1)],1)],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"身份详情信息\")])]),_c('scroll-pane',[(_vm.userAFromI.length || _vm.aFromI.length)?_c('div',{staticClass:\"user-form\"},[_c('dl',[_c('dt',[_c('p',[_vm._v(\"身份名称\")])]),_c('dd',[_vm._v(\"\\n                            \"+_vm._s(_vm.currentIdentityName)+\"\\n                        \")])]),_c('dl',[_c('dt',[_c('p',[_vm._v(\"权限\")])]),_c('dd',[_c('ul',_vm._l((_vm.aFromI),function(val,i){return _c('li',{key:i},[_vm._v(\"\\n                                    \"+_vm._s(val.authority)+\":\"+_vm._s(_vm.allAuthority.find(function (item){ return item.authorityName===val.authority; }).name)+\"  \\n                                    \"),_c('el-button',{staticStyle:{\"padding\":\"5px\"},attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteAuthor(val)}}})],1)}),0)])]),_c('dl',[_c('dt',[_c('p',[_vm._v(\"用户\")])]),_c('dd',[(_vm.userAFromI.length)?_c('ul',_vm._l((_vm.userAFromI),function(val){return _c('li',{key:val.id},[_vm._v(\"\\n                                    \"+_vm._s(val.userName)+\"\\n                                \")])}),0):_c('div',[_vm._v(\"暂无用户\")])])])]):_c('div',[_vm._v(\"暂无该信息\")])])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addUserDialogBtn,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.addUserDialogBtn=$event}}},[_c('el-form',{ref:\"addUserData\",attrs:{\"inline\":\"\",\"label-width\":\"80px\",\"rules\":_vm.addUserRule,\"model\":_vm.addUserData,\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.addUserData.userName),callback:function ($$v) {_vm.$set(_vm.addUserData, \"userName\", $$v)},expression:\"addUserData.userName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密  码\",\"prop\":\"userPwd\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.addUserData.userPwd),callback:function ($$v) {_vm.$set(_vm.addUserData, \"userPwd\", $$v)},expression:\"addUserData.userPwd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"身  份\",\"prop\":\"identity\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择活动区域\"},model:{value:(_vm.addUserData.identity),callback:function ($$v) {_vm.$set(_vm.addUserData, \"identity\", $$v)},expression:\"addUserData.identity\"}},_vm._l((_vm.allIdentity),function(val){return _c('el-option',{key:val.id,attrs:{\"label\":val.identityName,\"value\":val.id}})}),1)],1),_c('el-form-item',{staticClass:\"add-user-submit\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitAddUser('addUserData')}}},[_vm._v(\"提   交\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加新身份\",\"visible\":_vm.newAuthorViseble,\"width\":\"30%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.newAuthorViseble=$event}}},[_c('el-input',{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{\"placeholder\":\"请输入新用户名称\"},model:{value:(_vm.newAuthor),callback:function ($$v) {_vm.newAuthor=$$v},expression:\"newAuthor\"}}),_c('el-button',{on:{\"click\":function($event){_vm.newAuthorViseble = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.newLoading},on:{\"click\":_vm.addNewAuthorFn}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\nimport { axios } from '@/utils/http';\r\nimport HOST from '@/config/host';\r\n\r\n// 获取所有用户\r\nexport function getAllUser(){\r\n  return axios.get(HOST + '/user/getAllUser');\r\n}\r\n\r\n// 获取所有身份\r\n\r\nexport function getAllIdentity(){\r\n  return axios.get(HOST + '/user/getAllIdentity');\r\n}\r\n\r\n// 获取所有的权限\r\nexport function getAllAuthority(){\r\n  return axios.get(HOST + '/user/getAllAuthority');\r\n}\r\n\r\n// 获取所有的权限\r\nexport function addNewUser(data){\r\n  return axios.post(HOST + '/user/addNewUser',data);\r\n}\r\n\r\n\r\n\r\n// 修改用户权限\r\nexport function changeUserAuthor(data) {\r\n  return axios.post(HOST + '/user/editUser',data)\r\n}\r\n\r\n\r\n// 添加角色权限\r\n\r\nexport function addUserAuthor(data) {\r\n  return axios.post( HOST + '/user/addAuthorityForIdentity', data)\r\n}\r\n\r\n// 删除角色的权限\r\n\r\nexport function deleteAuthor(data) {\r\n  return axios.post(HOST + '/user/removeAuthorityForIdentity', data)\r\n}\r\n\r\n// 根据身份获取用户和权限\r\nexport function getUserAuthorityFromIdentity(identityId){\r\n  return Promise.all([getUserFromIdentity(identityId), getAuthorityFromIdentity(identityId)])\r\n}\r\nfunction getUserFromIdentity(id) {\r\n  return axios.get(HOST + '/user/getUserFromIdentity', {\r\n    params: {\r\n      identityId: id\r\n    }\r\n  })\r\n}\r\n\r\nfunction getAuthorityFromIdentity(id) {\r\n  return axios.get(HOST + '/user/getAuthorityFromIdentity', {\r\n      params: {\r\n        identityId: id\r\n      }\r\n  })\r\n}\r\n\r\n// 添加新角色\r\nexport function addNewAuthor(obj) {\r\n    return axios.post(HOST + '/user/addNewIdentity', obj)\r\n}\r\n\r\n// 删除角色和用户\r\n\r\nexport function deleteUser(obj) {\r\n    return axios.post(HOST + '/user/removeUserAndIdentity', obj)\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"moveblock\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":_vm.dragstart}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <ul class=\"moveblock\" draggable=\"true\" @dragstart=\"dragstart\">\r\n        <slot />\r\n    </ul>\r\n</template>\r\n<script>\r\nexport default {\r\n    props:{\r\n        movedata:Object\r\n    },\r\n    methods:{\r\n        dragstart({dataTransfer}){\r\n            dataTransfer.setData('text/plain',JSON.stringify(this.movedata));\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.moveblock{\r\n    background: #e5e9f2;\r\n    border-radius: 3px;\r\n    border:2px dashed #d3dce6;\r\n    margin-bottom: 10px;\r\n    padding: 5px;\r\n    user-select: none;\r\n    cursor: move;\r\n}\r\n.moveblock li{\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0ff375c4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0ff375c4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ff375c4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"userContainer\">\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"12\">\r\n                <el-card>\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>用户</span>\r\n                        <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"addUserDialogBtn = true\"><i class=\"el-icon-circle-plus-outline\"></i>添加用户</el-button>\r\n                    </div>\r\n                    <scroll-pane>\r\n                        <el-row :gutter=\"10\">\r\n                             <el-col \r\n                                :span=\"12\" \r\n                                v-for=\"val in allUser\"\r\n                                :key=\"val.userid\"\r\n                                style=\"position: relative;\"\r\n                            >   \r\n                                <move-block :movedata=\"val\">\r\n                                    <li>\r\n                                        <span>\r\n                                            <router-link \r\n                                                :to=\"{path: `/admin/userDetailInfo`,query:{userid: val.userid}}\"\r\n                                            >\r\n                                                用户名：{{val.userName}}\r\n                                            </router-link>\r\n                                        </span>\r\n                                        <el-button\r\n                                            type=\"info\"\r\n                                            icon=\"el-icon-delete\"\r\n                                            size=\"mini\"\r\n                                            class=\"deleteUser\"\r\n                                            style=\"padding: 0px;\"\r\n                                            @click=\"deleteI(val, true)\">\r\n                                        </el-button>\r\n                                    </li>\r\n                                    <li :title=\"val.identityName\"><span>身&nbsp;&nbsp;&nbsp;份：{{val.identityName}}</span></li>\r\n                                </move-block>\r\n                             </el-col>\r\n                        </el-row>\r\n                    </scroll-pane>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-card>\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>身份</span>\r\n                        <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"addAuthor\">\r\n                            <i class=\"el-icon-circle-plus-outline\"></i>\r\n                            添加角色\r\n                        </el-button>\r\n                    </div>\r\n                    <scroll-pane>\r\n                        <dl class=\"identity-list\">\r\n                            <dt>\r\n                                <span>身份id</span><span>身份名称</span><span>操作</span>\r\n                            </dt>\r\n                            <dd\r\n                                v-for=\"(val,i) in allIdentity\" \r\n                                :key=\"val.id\"\r\n                                :class=\"{\r\n                                    active:val.id === id,\r\n                                    hoverActive:i === hoverIndex\r\n                                }\"\r\n                                @click=\"changeIdentity(val.id, val.identityName)\"\r\n                                @dragenter=\"dragenter(i)\"\r\n                                @drop=\"drop($event,val)\"\r\n                            >\r\n                                <span>{{val.id}}</span><span>{{val.identityName}}</span>\r\n                                <span>\r\n                                    <el-button\r\n                                        type=\"danger\"\r\n                                        icon=\"el-icon-delete\"\r\n                                        size=\"mini\"\r\n                                        style=\"padding: 5px;\"\r\n                                        @click.stop=\"deleteI(val)\">\r\n                                    </el-button>\r\n                                </span>\r\n                            </dd>\r\n                        </dl>\r\n                    </scroll-pane>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-card>\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>权限</span>\r\n                    </div>\r\n                    <scroll-pane>\r\n                    <el-row :gutter=\"10\">\r\n                        <el-col \r\n                        :span=\"12\" \r\n                        v-for=\"val in allAuthority\"\r\n                        :key=\"val.id\"\r\n                        >   \r\n                            <move-block :movedata=\"val\">\r\n                                <li><span>权&nbsp;&nbsp;&nbsp;&nbsp;限：{{val.authorityName}}</span></li>\r\n                                <li :title=\"val.name\"><span>权限名称：{{val.name}}</span></li>\r\n                            </move-block>\r\n                        </el-col>\r\n                    </el-row>\r\n                    </scroll-pane>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-card>\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>身份详情信息</span>\r\n                    </div>\r\n                    <scroll-pane>\r\n                    <div v-if=\"userAFromI.length || aFromI.length\" class=\"user-form\">\r\n                        <dl>\r\n                            <dt><p>身份名称</p></dt>\r\n                            <dd>\r\n                                {{currentIdentityName}}\r\n                            </dd>\r\n                        </dl>\r\n                        <dl>\r\n                            <dt><p>权限</p></dt>\r\n                            <dd>\r\n                                <ul>\r\n                                    <li v-for=\"(val,i) in aFromI\" :key=\"i\">\r\n                                        {{val.authority}}:{{allAuthority.find(item=>item.authorityName===val.authority).name}}&nbsp;&nbsp;\r\n                                        <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" style=\"padding: 5px;\" @click=\"deleteAuthor(val)\"></el-button>\r\n                                    </li>\r\n                                </ul>\r\n                            </dd>\r\n                        </dl>\r\n                        <dl>\r\n                            <dt><p>用户</p></dt>\r\n                            <dd>\r\n                                <ul v-if=\"userAFromI.length\">\r\n                                    <li v-for=\"val in userAFromI\" :key=\"val.id\">\r\n                                        {{val.userName}}\r\n                                    </li>\r\n                                </ul>\r\n                                <div v-else>暂无用户</div>\r\n                            </dd>\r\n                        </dl>\r\n                    </div>\r\n                    <div v-else>暂无该信息</div>\r\n                    </scroll-pane>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n        <el-dialog\r\n            title=\"添加用户\"\r\n            :visible.sync=\"addUserDialogBtn\"\r\n            width=\"30%\"\r\n            :before-close=\"handleClose\">\r\n            <el-form \r\n                inline\r\n                label-width=\"80px\"\r\n                :rules=\"addUserRule\"\r\n                :model=\"addUserData\"\r\n                ref=\"addUserData\"\r\n                label-position=\"left\">\r\n                <el-form-item label=\"用户名\" prop=\"userName\">\r\n                    <el-input type=\"text\" v-model=\"addUserData.userName\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密  码\" prop=\"userPwd\">\r\n                    <el-input type=\"password\" v-model=\"addUserData.userPwd\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"身  份\" prop=\"identity\">\r\n                    <el-select placeholder=\"请选择活动区域\" v-model=\"addUserData.identity\">\r\n                        <el-option v-for=\"val in allIdentity\" :key=\"val.id\" :label=\"val.identityName\" :value=\"val.id\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item class=\"add-user-submit\">\r\n                    <el-button type=\"primary\" @click=\"submitAddUser('addUserData')\">提   交</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n        <el-dialog\r\n            title=\"添加新身份\"\r\n            :visible.sync=\"newAuthorViseble\"\r\n            width=\"30%\"\r\n            center>\r\n            <el-input v-model=\"newAuthor\" placeholder=\"请输入新用户名称\" style=\"margin-bottom: 40px;\"></el-input>\r\n            <el-button @click=\"newAuthorViseble = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"addNewAuthorFn\" :loading=\"newLoading\">确 定</el-button>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {\r\n    getAllUser,\r\n    getAllIdentity,\r\n    getUserAuthorityFromIdentity,\r\n    getAllAuthority,\r\n    addNewUser,\r\n    changeUserAuthor,\r\n    addUserAuthor,\r\n    deleteAuthor,\r\n    addNewAuthor,\r\n    deleteUser\r\n} from '../../../api/user'\r\nimport scrollPane from '@/components/ScrollPane/'\r\nimport moveBlock from '@/components/MoveBlock/'\r\nimport {\r\n    deleteAgain\r\n} from '../../../utils/utils.js'\r\nexport default {\r\n    data(){\r\n        let usernameValidate = (rule,value,callback)=>{\r\n            let reg = /^\\w{4,8}$/;\r\n            if(!value){\r\n                callback(new Error('用户名不能为空'))\r\n            }else if(!reg.test(value)){\r\n                callback(new Error('用户名必须在4位-8位之间的字母或数字'))\r\n            }else{\r\n                callback();\r\n            }\r\n        };\r\n        let passwordValidate = (rule,value,callback)=>{\r\n            let reg = /^\\w{6,}$/;\r\n            if(!value){\r\n                callback(new Error('密码不能为空'))\r\n            }else if(!reg.test(value)){\r\n                callback(new Error('密码必须在4位-8位之间的字母或数字'))\r\n            }else{\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            newAuthorViseble: false,\r\n            newLoading: false,\r\n            newAuthor: '',\r\n            id:0, //点击切换id 请求数据\r\n            hoverIndex:-1, //滑过切换样式\r\n            addUserDialogBtn:false, //添加用户弹窗\r\n            addUserData:{\r\n                userName:'',\r\n                userPwd:'',\r\n                identity:''\r\n            }, //添加用户数据\r\n            addUserRule:{\r\n                userName:{\r\n                    required:true,\r\n                    validator:usernameValidate,\r\n                    trigger:'change'\r\n                },\r\n                userPwd:{\r\n                    required:true,\r\n                    validator:passwordValidate,\r\n                    trigger:'change'\r\n                },\r\n                identity:{\r\n                    required:true,\r\n                    message:'必须要选择身份'\r\n                }\r\n            },\r\n            allUser:[],\r\n            allIdentity:[],\r\n            allAuthority:[],\r\n            userAFromI:[],\r\n            aFromI: []\r\n        }\r\n    },\r\n    components:{\r\n        scrollPane,\r\n        moveBlock\r\n    },\r\n    mounted(){\r\n        this.getAllUsers();\r\n        this.getAllI(true);\r\n        getAllAuthority().then(({data}) => {\r\n            this.allAuthority = Object.keys(data).map(key => {\r\n                return {\r\n                    authorityName:key,\r\n                    ...data[key]\r\n                }\r\n            })\r\n        })\r\n        document.addEventListener('dragover',this.dragover)\r\n    },\r\n    destroyed(){\r\n        document.removeEventListener('dragover',this.dragover)\r\n    },\r\n    methods:{\r\n        async deleteI(item, isUser) {\r\n            // console.log(item);\r\n            let obj = {}\r\n            try {\r\n                await deleteAgain();\r\n                obj.id = isUser ? item.userid : item.id;\r\n                obj.tableName = isUser ? 'user' : 'identity'\r\n                deleteUser(obj).then(res => {\r\n                    !isUser ? this.getAllI(false) : this.getAllUsers();\r\n                })\r\n            } catch (error) {\r\n            }\r\n            \r\n        },\r\n        getAllI(isFirst) {\r\n            getAllIdentity().then(({data}) => {\r\n                if (isFirst) {\r\n                    this.id = data[0].id;\r\n                    this.currentIdentityName = data[0].identityName\r\n                }\r\n                this.showInfo(this.id);\r\n                this.allIdentity = data;\r\n            });\r\n        },\r\n        addAuthor() {\r\n            this.newAuthorViseble = true;\r\n        },\r\n        addNewAuthorFn() {\r\n            addNewAuthor({identityName: this.newAuthor}).then(res => {\r\n                this.newAuthorViseble = false;\r\n                this.newLoading = false\r\n                this.getAllI(false)\r\n            }).catch(err => {\r\n                this.newLoading = false\r\n            })\r\n        },\r\n        async deleteAuthor(item) {\r\n            try {\r\n                await deleteAgain();\r\n                let obj = {\r\n                    identity_id: item.identity_id,\r\n                    authority: item.authority\r\n                }\r\n                deleteAuthor(obj).then(res => {\r\n                    this.showInfo(this.id);\r\n                })\r\n            } catch (error) {\r\n                \r\n            }\r\n            \r\n        },\r\n        getAllUsers() {\r\n            getAllUser().then(({data}) => {\r\n                this.allUser = data;\r\n            });\r\n        },\r\n        dragover(e){\r\n            e.preventDefault();\r\n        },\r\n        showInfo(id){\r\n            getUserAuthorityFromIdentity(id).then((data) => {\r\n                this.userAFromI = data[0].data;\r\n                this.aFromI = data[1].data\r\n            });\r\n        },\r\n        /**\r\n         * 点击身份切换身份信息\r\n         */\r\n        changeIdentity(id, name){\r\n            this.id = id;\r\n            this.currentIdentityName = name\r\n            console.log(this.id,this.currentIdentityName);\r\n            this.showInfo(id);\r\n        },\r\n        /**\r\n         * 拖动经过身份\r\n         */\r\n        dragenter(i){\r\n            this.hoverIndex = i;\r\n        },\r\n        /**\r\n         * 松开时\r\n         */\r\n        drop({dataTransfer},val){\r\n            //拖动元素数据\r\n            let movedata = JSON.parse(dataTransfer.getData('text/plain'))\r\n            //val 目标元素数据\r\n            if (movedata.authorityName) {\r\n                let obj = {\r\n                    identity_id: val.id,\r\n                    authority: movedata.authorityName\r\n                }\r\n                addUserAuthor(obj).then(res => {\r\n                    this.changeIdentity(val.id, val.identityName)\r\n                }).catch(()=>{\r\n                    this.changeIdentity(val.id, val.identityName)\r\n                })\r\n            } else {\r\n                let obj = {\r\n                    userid: movedata.userid,\r\n                    editData: {\r\n                        userName: movedata.userName,\r\n                        userPwd: movedata.userPwd,\r\n                        identity: val.id\r\n                    }\r\n                }\r\n                changeUserAuthor(obj).then(res => {\r\n                    if (val.id === this.id) {\r\n                        this.changeIdentity(val.id, val.identityName)\r\n                    }\r\n                    this.getAllUsers()\r\n                })\r\n            }\r\n            \r\n            this.hoverIndex = -1;\r\n        },\r\n        handleClose(){\r\n            this.addUserDialogBtn = false;\r\n        },\r\n        /**\r\n         * 点击添加用户提交\r\n         */\r\n        submitAddUser(formName){\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    addNewUser(this.addUserData).then(res=>{\r\n                        let {code} = res;\r\n                        if(code){ //成功 \r\n                            //关闭弹窗\r\n                            this.addUserDialogBtn = false;\r\n                            this.getAllUsers();\r\n                        }\r\n                    })\r\n                    return;\r\n                } \r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.scroll-container{\r\n    height: 200px;\r\n}\r\n.el-table::before{\r\n    display: none;\r\n}\r\n.el-card{\r\n    margin-bottom: 20px;\r\n}\r\n.userContainer .el-scrollbar__view .el-row{\r\n    margin-left: 0!important;\r\n    margin-right: 0!important;\r\n}\r\n.identity-list dt{\r\n    border-bottom: 2px solid #edf0f6;\r\n    height: 45px;\r\n    font-weight: 600;\r\n    line-height: 45px;\r\n}\r\n.identity-list dd{\r\n    border-bottom: 1px solid #edf0f6;\r\n    height: 40px;\r\n    line-height: 40px;\r\n    cursor: pointer;\r\n}\r\n.identity-list dd.active{\r\n    background: #409EFF;\r\n    color:#fff;\r\n}\r\n.identity-list dd.hoverActive{\r\n    background: #EBEEF5;\r\n}\r\n.identity-list span{\r\n    display: inline-block;\r\n    text-align: center;\r\n    width: 120px;\r\n}\r\n.user-form dl{\r\n    display: flex;\r\n    padding: 5px 0;\r\n}\r\n.user-form dl dt p{\r\n    width: 80px;\r\n    padding-right:5px;\r\n    display: inline-block;\r\n    align-content: center;\r\n    text-align-last: justify; \r\n}\r\n.user-form dl dt:after{\r\n    content: \":\";\r\n    display: inline-block;\r\n    padding-right: 10px;\r\n}\r\n.add-user-submit{\r\n    width: 100%;\r\n    text-align: center;\r\n}\r\n.deleteUser{\r\n    position: absolute;\r\n    top: 3px;\r\n    right: 10px;\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0b8daac8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0b8daac8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b8daac8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}