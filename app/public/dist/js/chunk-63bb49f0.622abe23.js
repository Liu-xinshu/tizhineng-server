(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63bb49f0"],{a9fe:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"mr10",staticStyle:{width:"200px"},attrs:{placeholder:"学生姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.addHandler}},[e._v("添加学生")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:"studentList",staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.studentList,border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"ID",prop:"sid",sortable:"custom",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.sid))])]}}])}),r("el-table-column",{attrs:{label:"学生姓名",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.studentName||a.name))])]}}])}),r("el-table-column",{attrs:{label:"学历",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.education))])]}}])}),r("el-table-column",{attrs:{label:"籍贯",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.place))])]}}])}),r("el-table-column",{attrs:{label:"联系电话",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.tel))])]}}])}),r("el-table-column",{attrs:{label:"邮箱",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.email))])]}}])}),r("el-table-column",{attrs:{label:"教师姓名",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.teahcerId))])]}}])}),r("el-table-column",{attrs:{label:"出生日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.birthday))])]}}])}),r("el-table-column",{attrs:{label:"备注",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.notes))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(a)}}},[e._v("编辑")]),"deleted"!=a.status?r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.sid)}}},[e._v("删除")]):e._e()]}}])})],1),r("el-pagination",{staticClass:"mt15",attrs:{background:"","current-page":e.listQuery.pageIndex,"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:e.textMap["dialogForm"],attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name","string"===typeof t?t.trim():t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[r("el-radio",{attrs:{label:0}},[e._v("男")]),r("el-radio",{attrs:{label:1}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[r("el-input",{attrs:{placeholder:"请输入学生身份证号码"},model:{value:e.ruleForm.idCard,callback:function(t){e.$set(e.ruleForm,"idCard",t)},expression:"ruleForm.idCard"}})],1),r("el-form-item",{attrs:{label:"出生日期",required:""}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"出生日期","value-format":"yyyy-MM-dd hh:mm:ss",format:"yyyy-MM-dd hh:mm:ss"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1),r("el-form-item",{attrs:{label:"学历",prop:"education"}},[r("el-input",{attrs:{placeholder:"请输入学生最高学历"},model:{value:e.ruleForm.education,callback:function(t){e.$set(e.ruleForm,"education",t)},expression:"ruleForm.education"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"tel"}},[r("el-input",{attrs:{placeholder:"请输入学生联系方式"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入学生个人邮箱"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"地址",prop:"place"}},[r("el-input",{attrs:{placeholder:"请输入学生现住址"},model:{value:e.ruleForm.place,callback:function(t){e.$set(e.ruleForm,"place",t)},expression:"ruleForm.place"}})],1),r("el-form-item",{attrs:{label:"家庭住址",prop:"homeAddress"}},[r("el-input",{attrs:{placeholder:"请输入学生家庭住址"},model:{value:e.ruleForm.homeAddress,callback:function(t){e.$set(e.ruleForm,"homeAddress",t)},expression:"ruleForm.homeAddress"}})],1),r("el-form-item",{attrs:{label:"市场部",prop:"orgCode"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择市场部"},model:{value:e.ruleForm.orgCode,callback:function(t){e.$set(e.ruleForm,"orgCode",t)},expression:"ruleForm.orgCode"}},e._l(e.orgCodeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.orgName,value:e.orgCode}})}),1)],1),r("el-form-item",{attrs:{label:"招生老师",prop:"teacherId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择招生老师"},model:{value:e.ruleForm.teacherId,callback:function(t){e.$set(e.ruleForm,"teacherId",t)},expression:"ruleForm.teacherId"}},e._l(e.teacherList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"备注",prop:"notes"}},[r("el-input",{model:{value:e.ruleForm.notes,callback:function(t){e.$set(e.ruleForm,"notes",t)},expression:"ruleForm.notes"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.onReset(e.textMap["dialogForm"])}}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit(e.textMap["dialogForm"])}}},[e._v("立即添加")])],1)],1)],1)},n=[],l=(r("96cf"),r("3b8d")),i=r("751a");function s(e){var t="/apply_student/getStudent";return i["a"].get(t,{params:e})}function o(e){var t="/apply_student/delStudent";return i["a"].post(t,e)}function u(){var e="/market_teacher/getTeacher";return i["a"].get(e)}function d(){var e="/org_chart/getDepartment";return i["a"].get(e)}var c={name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}],education:[{required:!0,message:"请选择学历",trigger:"change"}],tel:[{required:!0,message:"请输入手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],place:[{required:!0,message:"请输入地址",trigger:"blur"}],homeAddress:[{required:!0,message:"请输入家庭住址",trigger:"blur"}],orgCode:[{required:!0,message:"请输入机构代码",trigger:"blur"}],teacherId:[{required:!0,message:"请输入教师代码",trigger:"blur"}],isRecommend:[{required:!1,message:"是否被推荐",trigger:"change"}]},m=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],p=m.reduce(function(e,t){return e[t.key]=t.display_name,e},{}),g={update:"Edit",create:"Create",dialogForm:"dialogForm"},f=r("ed08"),h={name:"Student",filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]},typeFilter:function(e){return p[e]}},data:function(){return{textMap:g,statusOptions:["published","draft","deleted"],dialogFormVisible:!1,listLoading:!0,total:null,listQuery:{sid:"",pageSize:5,pageIndex:1,name:null},ruleForm:{name:"",idCard:"",birthday:"",education:"",tel:"",email:"",place:"",homeAddress:"",isRecommend:0,notes:"",sex:null,orgCode:null,teacherId:null},rules:c,studentList:[],teacherList:[],orgCodeList:[]}},mounted:function(){this.handleFilter(),this._getTeacherList(),this._getOrgCodeList()},methods:{_getOrgCodeList:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:t=e.sent,this.orgCodeList=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),_getTeacherList:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:t=e.sent,this.teacherList=t.data.teachers;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),_getStudentList:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,s(t);case 3:r=e.sent,this.listLoading=!1,this.studentList=r.data.studentList,this.total=r.data.total;case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),deleteStudent:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={sid:t},e.next=3,o(r);case 3:a=e.sent,1==a.code&&201===a.status&&this._getStudentList();case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteStudent(e),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.handleFilter()},handleCurrentChange:function(e){this.listQuery.pageIndex=e,this.handleFilter()},handleFilter:function(){var e=Object(f["b"])(this.listQuery);this._getStudentList(e)},onReset:function(e){Object(f["d"])(this.ruleForm),this.$refs[e].resetFields()},onSubmit:function(e){var t=this;console.log(this.ruleForm),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post("/apply_student/addStudent",t.ruleForm).then(function(e){if(0===e.code)return t.$message({message:e.msg||"",type:"error"});t.dialogFormVisible=!1,t.$message({message:e.msg||"",type:"success"}),t._getStudentList()})})},addHandler:function(){this.dialogFormVisible=!0}}},b=h,y=(r("ffdd"),r("2877")),v=Object(y["a"])(b,a,n,!1,null,"4faf9890",null);t["default"]=v.exports},ad4a:function(e,t,r){},ffdd:function(e,t,r){"use strict";var a=r("ad4a"),n=r.n(a);n.a}}]);
//# sourceMappingURL=chunk-63bb49f0.622abe23.js.map